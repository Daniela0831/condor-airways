{% extends 'base.html' %}

{% block content %}

<style>
/* --- Estilo tipo Netflix --- */
.titulo-seccion {
    font-size: 1.6rem;
    font-weight: bold;
    margin-bottom: 10px;
}

.slider-horizontal {
    display: flex;
    overflow-x: auto;
    gap: 20px;
    padding-bottom: 10px;
}
.slider-horizontal::-webkit-scrollbar {
    height: 8px;
}
.slider-horizontal::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

.card-netflix {
    min-width: 280px;
    max-width: 280px;
    border-radius: 10px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    transition: transform .2s;
}
.card-netflix:hover {
    transform: scale(1.05);
}

.card-netflix img {
    height: 160px;
    width: 100%;
    object-fit: cover;
}

.card-netflix .info {
    padding: 12px;
}
.card-netflix .info .ruta {
    font-size: 1rem;
    font-weight: bold;
}
.card-netflix .precio {
    font-size: 1.1rem;
    font-weight: bold;
    color: #0d6efd;
}
</style>

<h2 class="mt-4 mb-4 text-center fw-bold">‚úà Recomendaciones para ti</h2>

<div class="container">

    <!-- 1Ô∏è‚É£ Basado en historial -->
    {% if recomendados_historial %}
    <div class="mb-4">
        <div class="titulo-seccion text-success">üìò Basado en tu historial</div>
        <div class="slider-horizontal">
            {% for vuelo in recomendados_historial %}
            <div class="card-netflix">
                <img src="{{ vuelo.imagen.url }}" alt="Imagen vuelo">

                <div class="info">
                    <div class="ruta">{{ vuelo.origen }} ‚Üí {{ vuelo.destino }}</div>
                    <div class="precio">${{ vuelo.precio }}</div>
                    <a href="{% url 'reservar_vuelo' vuelo.id %}" class="btn btn-primary mt-2 w-100">Reservar</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- 1.5Ô∏è‚É£ √öltima b√∫squeda -->
    {% if recomendados_busqueda %}
    <div class="mb-4">
        <div class="titulo-seccion text-primary">üïµÔ∏è‚Äç‚ôÇÔ∏è Vuelos seg√∫n tu √∫ltima b√∫squeda</div>
        <div class="slider-horizontal">
            {% for vuelo in recomendados_busqueda %}
            <div class="card-netflix">
                <img src="{{ vuelo.imagen.url }}" alt="Imagen vuelo">

                <div class="info">
                    <div class="ruta">{{ vuelo.origen }} ‚Üí {{ vuelo.destino }}</div>
                    <div class="precio">${{ vuelo.precio }}</div>
                    <a href="{% url 'reservar_vuelo' vuelo.id %}" class="btn btn-primary mt-2 w-100">Reservar</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- 2Ô∏è‚É£ Tendencias -->
    {% if recomendados_tendencias %}
    <div class="mb-4">
        <div class="titulo-seccion text-warning">üî• Vuelos en tendencia</div>
        <div class="slider-horizontal">
            {% for vuelo in recomendados_tendencias %}
            <div class="card-netflix">
                <img src="{{ vuelo.imagen.url }}" alt="Imagen vuelo">
                <div class="info">
                    <div class="ruta">{{ vuelo.origen }} ‚Üí {{ vuelo.destino }}</div>
                    <div class="precio">${{ vuelo.precio }}</div>
                    <a href="{% url 'reservar_vuelo' vuelo.id %}" class="btn btn-warning mt-2 w-100 text-white">Reservar</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- 3Ô∏è‚É£ Baratos -->
    {% if recomendados_baratos %}
    <div class="mb-4">
        <div class="titulo-seccion text-info">üí∏ Vuelos m√°s baratos</div>
        <div class="slider-horizontal">
            {% for vuelo in recomendados_baratos %}
            <div class="card-netflix">
                <img src="{{ vuelo.imagen.url }}" alt="Imagen vuelo">

                <div class="info">
                    <div class="ruta">{{ vuelo.origen }} ‚Üí {{ vuelo.destino }}</div>
                    <div class="precio">${{ vuelo.precio }}</div>
                    <a href="{% url 'reservar_vuelo' vuelo.id %}" class="btn btn-info mt-2 w-100 text-white">Reservar</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- 4Ô∏è‚É£ Cu√°ndo comprar -->
    {% if recomendados_cuando_comprar %}
    <div class="mb-4">
        <div class="titulo-seccion text-dark">‚è≥ ¬øCu√°ndo comprar?</div>
        <div class="slider-horizontal">
            {% for item in recomendados_cuando_comprar %}
            <div class="card-netflix">

                <img src="{{ item.vuelo.imagen.url }}" alt="Imagen vuelo">

                <div class="info">
                    <div class="ruta">{{ item.vuelo.origen }} ‚Üí {{ item.vuelo.destino }}</div>
                    <div class="precio">${{ item.vuelo.precio }}</div>
                    <div style="color: green; font-weight: bold; font-size: 0.9rem;">
                        {{ item.mensaje }}
                    </div>
                    

                    <a href="{% url 'reservar_vuelo' item.vuelo.id %}" class="btn btn-dark mt-2 w-100">
                        Reservar
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

</div>

{% endblock %}
